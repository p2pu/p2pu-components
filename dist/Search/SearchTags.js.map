{"version":3,"file":"SearchTags.js","names":["React","t","jt","ngettext","msgid","isoCodeToLangName","MEETING_DAYS","SEARCH_SUBJECTS","COURSES_SORT_OPTIONS","SearchTag","value","onDelete","cursor","SearchTags","props","generateQueryTag","q","updateQueryParams","generateTeamNameTag","teamName","team_id","document","getElementById","style","display","humanReadableName","decodeURIComponent","generateLanguageTag","languages","length","newLanguagesArray","filter","v","introPhrase","languagesTagsArray","map","item","index","push","languageName","generateOrderTag","searchSubject","order","find","label","generateOerTag","oer","generateOnlineTag","online","generateTopicsTags","topics","newTopicsArray","topicsTagsArray","generateLocationTag","latitude","longitude","unit","useMiles","distance","Math","round","text","city","generateTagsPhrase","tag","generateSearchSummary","searchSummaryItems","forSearchSubject","withSpan","tagsToDisplay","resultsCount","searchResults","totalResults","tagsArray","reloadWindow","window","history","replaceState","title","location","pathname","reload","noResults","resetButton","isLoading"],"sources":["../../src/Search/SearchTags.jsx"],"sourcesContent":["import React from 'react';\nimport { t, jt, ngettext, msgid } from 'ttag';\n\nimport {isoCodeToLangName} from '../utils/i18n';\nimport { MEETING_DAYS, SEARCH_SUBJECTS, COURSES_SORT_OPTIONS } from '../utils/constants';\n\n\nconst SearchTag = ({ value, onDelete }) => {\n  return(\n    <div className='search-tag'>\n      {value}\n      <i className=\"material-icons\" onClick={ () => onDelete(value) } style={{ cursor: 'pointer' }}>clear</i>\n    </div>\n  )\n}\n\nconst SearchTags = (props) => {\n  const generateQueryTag = () => {\n    if (props.q) {\n      const onDelete = (value) => { props.updateQueryParams({ q: null }) }\n\n      return [<SearchTag key='queryTag-0' value={props.q} onDelete={onDelete} />];\n      return [<span key='queryTagIntro'>the search query</span>, <SearchTag key='queryTag-0' value={props.q} onDelete={onDelete} />];\n    }\n  }\n\n  const generateTeamNameTag = () => {\n    if (props.teamName) {\n      const onDelete = (value) => {\n        props.updateQueryParams({ teamName: null, team_id: null })\n        document.getElementById('team-title').style.display = 'none';\n        document.getElementById('search-subtitle').style.display = 'block';\n      }\n      const humanReadableName = decodeURIComponent(props.teamName);\n\n      return [<SearchTag key='queryTag-0' value={humanReadableName} onDelete={onDelete} />];\n      return [<span key='queryTagIntro'>organized by</span>, <SearchTag key='queryTag-0' value={humanReadableName} onDelete={onDelete} />];\n    }\n  }\n\n  const generateLanguageTag = () => {\n    if (props.languages && props.languages.length > 0) {\n      const onDelete = (value) => {\n        const newLanguagesArray = props.languages.filter(v => v != value);\n        const languages = newLanguagesArray.length > 0 ? newLanguagesArray : null\n        props.updateQueryParams({ languages })\n      }\n\n      const introPhrase = props.languages.length === 1 ? 'in' : 'in';\n      let languagesTagsArray = [<span key='languageTagIntro'>{introPhrase}</span>]\n\n      props.languages.map((item, index) => {\n        if (props.languages.length > 1 && index === (props.languages.length - 1)) {\n          languagesTagsArray.push(<span key={`languageTag-${index + 2}`}>or</span>)\n        }\n        let languageName = isoCodeToLangName(item)\n\n        languagesTagsArray.push(<SearchTag value={languageName} key={`languageTag-${index}`} onDelete={() => onDelete(item)} />)\n      })\n\n      return languagesTagsArray;\n    }\n  }\n\n  const generateOrderTag = () => {\n    if (props.searchSubject === 'courses' && props.order) {\n      const onDelete = (value) => { props.updateQueryParams({ order: null }) };\n      const order = COURSES_SORT_OPTIONS.find(order => order.value == props.order)\n\n      return [<span key='queryTagIntro'>sorted by </span>, <SearchTag key='queryTag-0' value={order.label} onDelete={onDelete} />];\n    }\n  }\n\n  const generateOerTag = () => {\n    if (props.oer) {\n      const onDelete = (value) => { props.updateQueryParams({ oer: false }) };\n\n      return [<span key='queryTagIntro'>that are </span>, <SearchTag key='queryTag-0' value={\"OER\"} onDelete={onDelete} />];\n    }\n  }\n\n  const generateOnlineTag = () => {\n    if (props.online !== null) {\n      const onDelete = (value) => { props.updateQueryParams({ online: null }) };\n\n      if (props.online === 'true'){\n        return [<SearchTag key='queryTag-0' value={\"Meeting online\"} onDelete={onDelete} />];\n      } else {\n        return [<SearchTag key='queryTag-0' value={\"Meeting in person\"} onDelete={onDelete} />];\n      }\n    }\n  }\n\n\n  const generateTopicsTags = () => {\n    if (props.topics && props.topics.length > 0) {\n      const onDelete = (value) => {\n        const newTopicsArray =  props.topics.filter(v => v != value);\n        const topics = newTopicsArray.length > 0 ? newTopicsArray : null\n        props.updateQueryParams({ topics })\n      }\n\n      const introPhrase = props.topics.length === 1 ? 'the topic' : 'the topics';\n      let topicsTagsArray = [<span key='topicTagIntro'>{introPhrase}</span>]\n      topicsTagsArray = []; // TODO\n\n      props.topics.map((item, index) => {\n        if (props.topics.length > 1 && index === (props.topics.length - 1)) {\n          topicsTagsArray.push(<span key={`topicTag-${index + 2}`}>or</span>)\n        }\n\n        topicsTagsArray.push(<SearchTag value={item} key={`topicTag-${index}`} onDelete={onDelete} />)\n      })\n\n      return topicsTagsArray;\n    }\n  }\n\n  const generateLocationTag = () => {\n    if (props.latitude && props.longitude) {\n      const unit = props.useMiles ? 'miles' : 'km';\n      let value = props.useMiles ? props.distance * 0.62 : props.distance;\n      value = Math.round(value / 5) * 5;\n      const text = t`Within ${ value } ${ unit }`;\n      const onDelete = (value) => {\n        props.updateQueryParams({ latitude: null, longitude: null, distance: 50 })\n      }\n      return [<SearchTag key='locationTag-0' value={text} onDelete={onDelete} />];\n      return [<span key='locationTagIntro'>located</span>, <SearchTag key='locationTag-0' value={text} onDelete={onDelete} />];\n    } else if (props.city) {\n      const onDelete = (value) => {\n        props.updateQueryParams({ city: null })\n      }\n      return [<SearchTag key='locationTag-0' value={props.city} onDelete={onDelete} />];\n      return [<span key='locationTagIntro'>located in</span>, <SearchTag key='locationTag-0' value={props.city} onDelete={onDelete} />];\n    }\n  }\n\n  const generateTagsPhrase = (tag) => {\n    switch (tag) {\n      case 'q':\n      return generateQueryTag();\n      case 'topics':\n      return generateTopicsTags();\n      case 'location':\n      return generateLocationTag();\n      case 'teamName':\n      return generateTeamNameTag();\n      case 'language':\n      return generateLanguageTag();\n      case 'order':\n      return generateOrderTag();\n      case 'oer':\n      return generateOerTag();\n      case 'online':\n      return generateOnlineTag();\n    }\n  }\n\n  const generateSearchSummary = () => {\n    let searchSummaryItems = []\n    const forSearchSubject = <span key='resultsSummary-1'>for {SEARCH_SUBJECTS[props.searchSubject]}</span>;\n    const withSpan = <span key='resultsSummary-2'>with</span>;\n    const tagsToDisplay = ['q', 'topics', 'location', 'meetingDays', 'language', 'teamName', 'order', 'oer', 'online'];\n    const resultsCount =\n      <span key='resultsSummary-0'>{\n        ngettext(\n          msgid`Showing ${props.searchResults.length} of ${props.totalResults} result`,\n          `Showing ${props.searchResults.length} of ${props.totalResults} results`,\n          props.totalResults\n        )\n      }</span>\n\n    if (props.searchSubject === 'courses') {\n      searchSummaryItems.push(resultsCount)\n    }\n\n    tagsToDisplay.map((tag) => {\n      const tagsArray = generateTagsPhrase(tag);\n\n      if (!!tagsArray) {\n        if (searchSummaryItems.length === 1) {\n          // TODO searchSummaryItems.push(forSearchSubject)\n          if (tag === 'q' || tag === 'topics') {\n            // TODO searchSummaryItems.push(withSpan)\n          }\n        } else {\n          // TODO searchSummaryItems.push(<span key={`resultsSummary-${searchSummaryItems.length}`}>and</span>)\n        }\n        searchSummaryItems.push(tagsArray)\n      }\n    })\n\n    return searchSummaryItems;\n  }\n\n  const reloadWindow = () => {\n    if (typeof window !== `undefined`) {\n      window.history.replaceState({}, document.title, window.location.pathname)\n      window.location.reload()\n    }\n  }\n\n  const noResults = props.searchResults.length === 0;\n  const resetButton = <button key=\"reset-search\" onClick={reloadWindow} className='p2pu-btn light with-outline'>{t`reset the search form`}</button>;\n\n  return(\n    <div className='results-summary'>\n      <div className='search-tags wrapper'>\n        {generateSearchSummary()}\n      </div>\n      { noResults && !props.isLoading &&\n        <div className='clear-search'>\n          {jt`To see more results, either remove some filters or ${resetButton}`}\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default SearchTags;\n"],"mappings":"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"}