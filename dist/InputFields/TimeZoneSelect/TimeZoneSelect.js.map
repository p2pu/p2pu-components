{"version":3,"file":"TimeZoneSelect.js","names":["React","Component","PropTypes","axios","Select","timezones","InputWrapper","GEONAMES_ENDPOINT","TimeZoneSelect","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","selected","timezone","value","handleChange","name","latitude","longitude","url","concat","get","then","res","data","timezoneId","err","console","log","Intl","DateTimeFormat","resolvedOptions","timeZone","_createClass","key","componentDidMount","detectTimeZone","render","_this$props","label","id","required","disabled","errorMessage","helpText","classes","selectClasses","isClearable","isMulti","rest","_objectWithoutProperties","_excluded","timezoneOptions","map","tz","find","opt","createElement","_extends","className","onChange","options","isDisabled","classNamePrefix","theme","_objectSpread","colors","primary","primary75","primary50","primary25","default","propTypes","func","isRequired","string","bool","defaultProps"],"sources":["../../../src/InputFields/TimeZoneSelect/TimeZoneSelect.js"],"sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios';\nimport Select from 'react-select'; //TODO\nimport timezones from './timezone-names.js';\nimport InputWrapper from '../InputWrapper'\n\nconst GEONAMES_ENDPOINT = 'https://secure.geonames.org/timezoneJSON'\n\nexport default class TimeZoneSelect extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.detectTimeZone()\n  }\n\n  onChange = (selected) => {\n    const timezone = !!selected ? selected.value : null;\n    this.props.handleChange({ [this.props.name]: timezone });\n  }\n\n  detectTimeZone = () => {\n    if (!this.props.value) {\n      if (!!this.props.latitude && !!this.props.longitude) {\n        // use selected city to detect timezone\n        const url = `${GEONAMES_ENDPOINT}?lat=${this.props.latitude}&lng=${this.props.longitude}&username=p2pu`;\n        axios.get(url).then(res => {\n          const timezone = res.data.timezoneId;\n          this.props.handleChange({ [this.props.name]: timezone })\n        }).catch(err => console.log(err))\n      } else {\n        // detect timezone from browser\n        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        this.props.handleChange({ [this.props.name]: timezone })\n      }\n    }\n  }\n\n\n  render() {\n    const { label, name, id, value, required, disabled, errorMessage, helpText, classes, selectClasses, isClearable, isMulti, ...rest } = this.props\n    const timezoneOptions = timezones.map((tz) => ({value: tz, label: tz }))\n    const selected = timezoneOptions.find(opt => opt.value === value) || null;\n\n    return(\n      <InputWrapper\n        label={label}\n        name={name}\n        id={id}\n        required={required}\n        disabled={disabled}\n        errorMessage={errorMessage}\n        helpText={helpText}\n        classes={classes}\n      >\n        <Select\n          name={ name }\n          id={ name }\n          className={ `form-group input-with-label ${selectClasses}` }\n          value={ selected }\n          onChange={ this.onChange }\n          options={timezoneOptions}\n          isClearable={ isClearable }\n          isMulti={ isMulti }\n          isDisabled={ disabled }\n          classNamePrefix={'timezone-select'}\n          theme={theme => ({\n            ...theme,\n            colors: {\n              ...theme.colors,\n              primary: '#05c6b4',\n              primary75: '#D3D8E6',\n              primary50: '#e0f7f5',\n              primary25: '#F3F4F8'\n            },\n          })}\n          {...rest}\n        />\n      </InputWrapper>\n    )\n  }\n}\n\nTimeZoneSelect.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  classes: PropTypes.string,\n  selectClasses: PropTypes.string,\n  timezone: PropTypes.string,\n  latitude: PropTypes.string,\n  longitude: PropTypes.string,\n  errorMessage: PropTypes.string,\n  isClearable: PropTypes.bool,\n  isMulti: PropTypes.bool,\n}\n\nTimeZoneSelect.defaultProps = {\n  classes: \"\",\n  selectClasses: \"\",\n  handleChange: (selected) => console.log(\"Implement a function to save selection\", selected),\n  isClearable: true,\n  isMulti: false,\n}\n\n"],"mappings":"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"}