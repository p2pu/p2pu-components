{"version":3,"file":"TimeZoneSelect.js","names":["React","Component","PropTypes","axios","Select","timezones","InputWrapper","GEONAMES_ENDPOINT","TimeZoneSelect","props","selected","timezone","value","handleChange","name","latitude","longitude","url","get","then","res","data","timezoneId","err","console","log","Intl","DateTimeFormat","resolvedOptions","timeZone","detectTimeZone","label","id","required","disabled","errorMessage","helpText","classes","selectClasses","isClearable","isMulti","rest","timezoneOptions","map","tz","find","opt","onChange","theme","colors","primary","primary75","primary50","primary25","propTypes","func","isRequired","string","bool","defaultProps"],"sources":["../../../src/InputFields/TimeZoneSelect/TimeZoneSelect.js"],"sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios';\nimport Select from 'react-select'; //TODO\nimport timezones from './timezone-names.js';\nimport InputWrapper from '../InputWrapper'\n\nconst GEONAMES_ENDPOINT = 'https://secure.geonames.org/timezoneJSON'\n\nexport default class TimeZoneSelect extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.detectTimeZone()\n  }\n\n  onChange = (selected) => {\n    const timezone = !!selected ? selected.value : null;\n    this.props.handleChange({ [this.props.name]: timezone });\n  }\n\n  detectTimeZone = () => {\n    if (!this.props.value) {\n      if (!!this.props.latitude && !!this.props.longitude) {\n        // use selected city to detect timezone\n        const url = `${GEONAMES_ENDPOINT}?lat=${this.props.latitude}&lng=${this.props.longitude}&username=p2pu`;\n        axios.get(url).then(res => {\n          const timezone = res.data.timezoneId;\n          this.props.handleChange({ [this.props.name]: timezone })\n        }).catch(err => console.log(err))\n      } else {\n        // detect timezone from browser\n        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        this.props.handleChange({ [this.props.name]: timezone })\n      }\n    }\n  }\n\n\n  render() {\n    const { label, name, id, value, required, disabled, errorMessage, helpText, classes, selectClasses, isClearable, isMulti, ...rest } = this.props\n    const timezoneOptions = timezones.map((tz) => ({value: tz, label: tz }))\n    const selected = timezoneOptions.find(opt => opt.value === value) || null;\n\n    return(\n      <InputWrapper\n        label={label}\n        name={name}\n        id={id}\n        required={required}\n        disabled={disabled}\n        errorMessage={errorMessage}\n        helpText={helpText}\n        classes={classes}\n      >\n        <Select\n          name={ name }\n          id={ name }\n          className={ `form-group input-with-label ${selectClasses}` }\n          value={ selected }\n          onChange={ this.onChange }\n          options={timezoneOptions}\n          isClearable={ isClearable }\n          isMulti={ isMulti }\n          isDisabled={ disabled }\n          classNamePrefix={'timezone-select'}\n          theme={theme => ({\n            ...theme,\n            colors: {\n              ...theme.colors,\n              primary: '#05c6b4',\n              primary75: '#D3D8E6',\n              primary50: '#e0f7f5',\n              primary25: '#F3F4F8'\n            },\n          })}\n          {...rest}\n        />\n      </InputWrapper>\n    )\n  }\n}\n\nTimeZoneSelect.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  classes: PropTypes.string,\n  selectClasses: PropTypes.string,\n  timezone: PropTypes.string,\n  latitude: PropTypes.string,\n  longitude: PropTypes.string,\n  errorMessage: PropTypes.string,\n  isClearable: PropTypes.bool,\n  isMulti: PropTypes.bool,\n}\n\nTimeZoneSelect.defaultProps = {\n  classes: \"\",\n  selectClasses: \"\",\n  handleChange: (selected) => console.log(\"Implement a function to save selection\", selected),\n  isClearable: true,\n  isMulti: false,\n}\n\n"],"mappings":"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"}