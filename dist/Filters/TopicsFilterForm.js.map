{"version":3,"sources":["../../src/Filters/TopicsFilterForm.jsx"],"names":["React","Component","ApiHelper","t","Select","TopicsFilterForm","props","resourceType","searchSubject","api","params","callback","response","topics","Object","keys","sort","options","mapArrayToSelectOptions","setState","fetchResource","selected","updateQueryParams","value","topic","filter","array","map","label","state","fetchTopics","option","indexOf","customStyles","indicatorSeparator","provided","display","onChange","e","removeTopic"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ApiHelper from '../utils/apiHelper'\nimport { t } from 'ttag'\nimport Select from 'react-select'\n\nexport default class TopicsFilterForm extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { options: [] }\n  }\n\n  componentDidMount() {\n    this.fetchTopics();\n  }\n\n  fetchTopics = () => {\n    const resourceType = `${this.props.searchSubject}Topics`;\n    const api = new ApiHelper(resourceType);\n    const params = {};\n    const callback = (response) => {\n      const topics = Object.keys(response.topics).sort()\n      const options = this.mapArrayToSelectOptions(topics);\n      this.setState({ options })\n    }\n\n    api.fetchResource({ params, callback })\n  }\n\n  onChange = (selected) => {\n    let {topics = []} = this.props;\n    if (selected) {\n      this.props.updateQueryParams({topics: [...topics, selected.value]});\n    }\n  }\n\n  removeTopic = (topic) => {\n    this.props.updateQueryParams({topics: this.props.topics.filter(t => t != topic)});\n  }\n\n  mapArrayToSelectOptions = (array) => {\n    return array.map((topic) => ({ value: topic, label: topic }))\n  }\n\n  render() {\n    let {topics = []} = this.props;\n    let options = this.state.options.filter( option => topics.indexOf(option.value) == -1);\n    const customStyles = {\n      indicatorSeparator: (provided, state) => ({\n        ...provided,\n        display: 'none',\n      }),\n    }\n\n    return(\n      <>\n        <form class=\"search\">\n          <label for=\"search-input\" class=\"form-label\">Topics</label>\n          <Select\n            name={'topics'}\n            options={options}\n            isMulti={false}\n            value={null}\n            onChange={this.onChange}\n            styles={customStyles}\n          />\n          <div class=\"badges selected pt-4\">\n            { \n              this.props.topics && topics.map(topic => \n                <span class=\"badge topic-selected topic\">\n                  <span class=\"material-icons dismiss\" onClick={e => this.removeTopic(topic)}>close</span>{topic}</span>\n              )\n            }\n          </div>\n        </form>\n\n      </>\n    )\n  }\n}\n"],"file":"TopicsFilterForm.js"}