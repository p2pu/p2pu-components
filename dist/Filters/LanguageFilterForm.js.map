{"version":3,"sources":["../../src/Filters/LanguageFilterForm.jsx"],"names":["React","Component","t","ApiHelper","SelectWithLabel","Select","LanguageFilterForm","props","resourceType","api","params","callback","response","options","mapArrayToSelectOptions","languages","setState","fetchResource","selected","updateQueryParams","value","lang","filter","l","array","map","item","code","label","name_local","state","fetchLanguages","console","log","option","indexOf","langName","langs","o","length","customStyles","indicatorSeparator","provided","display","handleSelect","removeLanguage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { t } from 'ttag';\nimport ApiHelper from '../utils/apiHelper'\n\nimport SelectWithLabel from '../InputFields/SelectWithLabel'\nimport Select from 'react-select'\n\nexport default class LanguageFilterForm extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { options: [] };\n  }\n\n  componentDidMount() {\n    this.fetchLanguages();\n  }\n\n  fetchLanguages = () => {\n    const resourceType = `coursesLanguages`;\n    const api = new ApiHelper(resourceType);\n    const params = {};\n    const callback = (response) => {\n      const options = this.mapArrayToSelectOptions(response.languages);\n      this.setState({ options })\n    }\n\n    api.fetchResource({ params, callback })\n  }\n\n  handleSelect = (selected) => {\n    if (selected) {\n      this.props.updateQueryParams({languages: [...this.props.languages, selected.value]});\n    }\n  }\n\n  removeLanguage = lang => {\n    this.props.updateQueryParams({languages: this.props.languages.filter(l => l != lang)});\n  }\n\n  mapArrayToSelectOptions = (array) => {\n    return array.map((item) => ({ value: item.code, label: item.name_local }))\n  }\n\n  render() {\n    console.log('this.props.languages', this.props.languages)\n    let options = this.state.options.filter( option => this.props.languages.indexOf(option.value) == -1 );\n\n    const langName = lang => {\n      let langs = this.state.options.filter(o => o.value === lang);\n      console.log(langs);\n      if (langs.length){\n        return langs[0].label;\n      }\n      return lang;\n    };\n\n    const customStyles = {\n      indicatorSeparator: (provided, state) => ({\n        ...provided,\n        display: 'none',\n      }),\n    }\n\n    return(\n      <form class=\"search\">\n        <label for=\"search-input\" class=\"form-label\">Languages</label>\n        <Select\n          name={'languages'}\n          classes='no-flex'\n          options={options}\n          isMulti={false}\n          value={null}\n          onChange={this.handleSelect}\n          styles={customStyles}\n        />\n        <div class=\"badges selected pt-4\">\n          { \n            this.props.languages.map(lang =>\n              <span class=\"badge topic-selected topic\"><span class=\"material-icons dismiss\" onClick={()=> this.removeLanguage(lang)}>close</span>{langName(lang)}</span>\n            )\n          }\n        </div>\n      </form>\n    )\n  }\n}\n"],"file":"LanguageFilterForm.js"}