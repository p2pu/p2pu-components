{"version":3,"file":"LearningCircleCard.js","names":["React","t","Card","CardTitle","CardBody","COLOR_CLASSES","date","day","time","cardFormatting","color","label","LearningCircleCard","props","learningCircle","locale","onSelectResult","formattedStartDate","start_date","formattedStartTime","meeting_time","formattedEndDate","last_meeting_date","formattedEndTime","end_time","weekDay","schedule","meets_weekly","time_zone","frequency","weeks","name","course","title","isSignupOpen","today","Date","startDate","endDate","isUpcoming","isCompleted","isInProgress","status","colorClass","cardLabel","dateLabel","onClick","e","preventDefault","window","location","href","url","imageUrl","defaultImageUrl","image_url","city","facilitator","venue"],"sources":["../../src/LearningCircles/LearningCircleCard.jsx"],"sourcesContent":["import React from 'react'\nimport { t } from \"ttag\";\nimport { Card, CardTitle, CardBody } from '../Card';\nimport { COLOR_CLASSES } from '../utils/constants';\nimport { date, day, time } from '../utils/i18n';\n\nconst cardFormatting = {\n  'upcoming': {\n    color: 'p2pu-blue',\n    label: 'Starting soon',\n    class: 'starting-soon',\n  },\n  'in_progress': {\n    color: 'p2pu-green',\n    label: 'In progress',\n    class: 'in-progress',\n  },\n  'closed': {\n    color: 'p2pu-yellow',\n    label: 'Sign up closed',\n    class: 'signup-closed',\n  },\n  'completed': {\n    color: 'p2pu-gray',\n    label: 'Completed',\n    class: 'closed',\n  }\n}\n\nconst LearningCircleCard = (props) => {\n  const { learningCircle, locale, onSelectResult } = props;\n  const formattedStartDate = date(learningCircle.start_date, locale);\n  const formattedStartTime = time(learningCircle.meeting_time);\n  const formattedEndDate = date(learningCircle.last_meeting_date, locale);\n  const formattedEndTime = time(learningCircle.end_time);\n  const weekDay = day(learningCircle.day);\n\n  const schedule = learningCircle.meets_weekly ? t`${weekDay} from ${formattedStartTime} to ${formattedEndTime} (${learningCircle.time_zone})` : t`${formattedStartTime} to ${formattedEndTime} (${learningCircle.time_zone})`;\n  const frequency = learningCircle.meets_weekly ? t`${learningCircle.weeks} weeks starting ${formattedStartDate}` : t`${learningCircle.weeks} meetings starting ${formattedStartDate}`;\n  const name = learningCircle.name ? learningCircle.name : learningCircle.course.title;\n\n  const isSignupOpen = props.isSignupOpen\n  const today = new Date()\n  const startDate = new Date(learningCircle.start_date)\n  const endDate = new Date(learningCircle.last_meeting_date)\n\n  const isUpcoming = startDate > today\n  const isCompleted = endDate < today\n  const isInProgress = startDate < today && endDate > today\n\n  const status = learningCircle.status || 'completed'\n  const colorClass = cardFormatting[status].color\n  const cardLabel = cardFormatting[status].label\n\n  let dateLabel = t`Ended ${formattedEndDate}`\n  if (status === 'in_progress' || status === 'closed') {\n    dateLabel = t`Started ${formattedStartDate}`\n  } else if (status === 'upcoming') {\n    dateLabel = t`Starting ${formattedStartDate}`\n  }\n\n  const onClick = (e) => {\n    e.preventDefault();\n    if (onSelectResult) {\n      onSelectResult(learningCircle)\n    } else {\n      window.location.href = learningCircle.url;\n    }\n  }\n  let imageUrl = props.defaultImageUrl;\n  if (learningCircle.image_url){\n    imageUrl = learningCircle.image_url;\n  }\n\n  return (\n    <div className=\"result-item grid-item col-md-6 col-lg-4\" >\n      <a className=\"learning-circle-card-link\" href={learningCircle.url} onClick={onClick} >\n        <div className={`card learning-circle ${cardFormatting[status].class}`}>\n          <div className=\"status-tag\"><span>{t(cardLabel)}</span></div>\n          <div className=\"card-image\">\n            <img src={imageUrl} alt={name} className=\"card-img-top\" />\n          </div>\n          <div className=\"card-header\">\n            <span className=\"eyebrow\">{dateLabel}</span>\n            <h3 className=\"card-title\">{name}</h3>\n          </div>\n          <div className=\"card-body\">\n            <span className=\"schedule\">\n              <i className=\"material-icons\">schedule</i>\n              { schedule }\n            </span>\n            <span className=\"duration\">\n              <i className=\"material-icons\">today</i>{ frequency }\n            </span>\n            <span className=\"city-country\">\n              <i className=\"material-icons\">place</i>\n              {learningCircle.city}\n            </span>\n            <span className=\"facilitator\">\n              <i className=\"material-icons\">face</i>\n              {t`Facilitated by ${learningCircle.facilitator}`}\n            </span>\n            <span className=\"location\">\n              <i className=\"material-icons\">store</i>\n              {t`Meeting at ${learningCircle.venue}`}\n            </span>\n          </div>\n          <div className=\"card-footer\">\n            <button className=\"btn p2pu-btn btn-sm gray mx-auto d-block\">\n              {isSignupOpen ? t`Sign up` : t`View details`}\n            </button>\n          </div>\n        </div>\n      </a>\n    </div>\n  );\n}\n\nexport default LearningCircleCard\n"],"mappings":"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"}