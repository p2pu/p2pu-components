{"version":3,"file":"CitySelect.js","names":["React","useState","useEffect","PropTypes","Select","jsonp","CitySelect","props","_useState","_useState2","_slicedToArray","cities","setCities","url","concat","origin","err","res","console","log","items","cities_","filter","city","uniqBy","arr","fn","_toConsumableArray","Map","map","x","values","el","value","onChange","selected","query","label","handleChange","_defineProperty","name","getSelected","isMulti","_typeof","v","find","id","disabled","required","errorMessage","classes","selectClasses","handleInputChange","noResultsText","placeholder","isClearable","rest","_objectWithoutProperties","_excluded","customStyles","indicatorSeparator","provided","state","_objectSpread","display","createElement","_extends","className","options","onInputChange","isDisabled","classNamePrefix","styles","propTypes","func","isRequired","string","helpText","bool","defaultProps"],"sources":["../../src/LearningCircles/CitySelect.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport Select from 'react-select'\nimport jsonp from 'jsonp'\n\n\nexport const CitySelect = props => {\n  const [cities, setCities] = useState([])\n\n  useEffect(() => {\n    const url = `${props.origin}/api/learningcircles/cities/`;\n    jsonp(url, null, (err, res) => {\n      if (err) {\n        console.log(err)\n      } else {\n        if (res.items) {\n          let cities_ = res.items.filter( city => city );\n          const uniqBy = (arr, fn) => [...new Map(arr.map((x) => [typeof fn === 'function' ? fn(x) : x[fn], x])).values()]\n          cities_ = uniqBy(cities_, el => el.value);\n          setCities(cities_);\n        } else {\n          console.log(res)\n        }\n      }\n    });\n  }, [])\n\n\n  const onChange = (selected) => {\n    const query = selected ? selected.label : selected;\n    props.handleChange({ [props.name]: query })\n  }\n\n  const getSelected = value => {\n    const { isMulti } = props;\n    if (!value) {\n      return null\n    }\n\n    if (isMulti && typeof(value === 'object')) {\n      return value.map(v => cities.find(city => city.label === v))\n    }\n\n    return cities.find(city => city.label === value)\n  }\n\n  const { \n    name, id, value, disabled, required, errorMessage,\n    classes, selectClasses, handleInputChange, noResultsText,\n    placeholder, isClearable, isMulti, ...rest \n  } = props;\n\n  const selected = getSelected(value);\n\n  const customStyles = {\n    indicatorSeparator: (provided, state) => ({\n      ...provided,\n      display: 'none',\n    }),\n  }\n\n  return(\n    <Select\n      name={ name }\n      className={ `city-select ${selectClasses}` }\n      value={ selected }\n      options={ cities }\n      onChange={ onChange }\n      onInputChange={ handleInputChange }\n      noResultsText={ noResultsText }\n      placeholder={ placeholder }\n      isClearable={ isClearable }\n      isMulti={ isMulti }\n      isDisabled={ disabled }\n      classNamePrefix={'city-select'}\n      styles={customStyles}\n      {...rest}\n    />\n  )\n}\n\nCitySelect.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  handleInputChange: PropTypes.func,\n  classes: PropTypes.string,\n  noResultsText: PropTypes.string,\n  placeholder: PropTypes.string,\n  helpText: PropTypes.string,\n  errorMessage: PropTypes.string,\n  isClearable: PropTypes.bool,\n  isMulti: PropTypes.bool,\n}\n\nCitySelect.defaultProps = {\n  noResultsText: \"No results for this city\",\n  placeholder: \"Start typing a city name...\",\n  classes: \"\",\n  name: \"select-city\",\n  handleChange: (selected) => console.log(\"Implement a function to save selection\", selected),\n  isClearable: true,\n  isMulti: false,\n  value: null,\n}\n\nexport default CitySelect;\n"],"mappings":"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"}