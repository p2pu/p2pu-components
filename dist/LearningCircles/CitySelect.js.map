{"version":3,"file":"CitySelect.js","names":["React","useState","useEffect","PropTypes","Select","jsonp","CitySelect","props","cities","setCities","url","origin","err","res","console","log","items","cities_","filter","city","uniqBy","arr","fn","Map","map","x","values","el","value","onChange","selected","query","label","handleChange","name","getSelected","isMulti","v","find","id","disabled","required","errorMessage","classes","selectClasses","handleInputChange","noResultsText","placeholder","isClearable","rest","customStyles","indicatorSeparator","provided","state","display","propTypes","func","isRequired","string","helpText","bool","defaultProps"],"sources":["../../src/LearningCircles/CitySelect.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport Select from 'react-select'\nimport jsonp from 'jsonp'\n\n\nexport const CitySelect = props => {\n  const [cities, setCities] = useState([])\n\n  useEffect(() => {\n    const url = `${props.origin}/api/learningcircles/cities/`;\n    jsonp(url, null, (err, res) => {\n      if (err) {\n        console.log(err)\n      } else {\n        if (res.items) {\n          let cities_ = res.items.filter( city => city );\n          const uniqBy = (arr, fn) => [...new Map(arr.map((x) => [typeof fn === 'function' ? fn(x) : x[fn], x])).values()]\n          cities_ = uniqBy(cities_, el => el.value);\n          setCities(cities_);\n        } else {\n          console.log(res)\n        }\n      }\n    });\n  }, [])\n\n\n  const onChange = (selected) => {\n    const query = selected ? selected.label : selected;\n    props.handleChange({ [props.name]: query })\n  }\n\n  const getSelected = value => {\n    const { isMulti } = props;\n    if (!value) {\n      return null\n    }\n\n    if (isMulti && typeof(value === 'object')) {\n      return value.map(v => cities.find(city => city.label === v))\n    }\n\n    return cities.find(city => city.label === value)\n  }\n\n  const { \n    name, id, value, disabled, required, errorMessage,\n    classes, selectClasses, handleInputChange, noResultsText,\n    placeholder, isClearable, isMulti, ...rest \n  } = props;\n\n  const selected = getSelected(value);\n\n  const customStyles = {\n    indicatorSeparator: (provided, state) => ({\n      ...provided,\n      display: 'none',\n    }),\n  }\n\n  return(\n    <Select\n      name={ name }\n      className={ `city-select ${selectClasses}` }\n      value={ selected }\n      options={ cities }\n      onChange={ onChange }\n      onInputChange={ handleInputChange }\n      noResultsText={ noResultsText }\n      placeholder={ placeholder }\n      isClearable={ isClearable }\n      isMulti={ isMulti }\n      isDisabled={ disabled }\n      classNamePrefix={'city-select'}\n      styles={customStyles}\n      {...rest}\n    />\n  )\n}\n\nCitySelect.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  handleInputChange: PropTypes.func,\n  classes: PropTypes.string,\n  noResultsText: PropTypes.string,\n  placeholder: PropTypes.string,\n  helpText: PropTypes.string,\n  errorMessage: PropTypes.string,\n  isClearable: PropTypes.bool,\n  isMulti: PropTypes.bool,\n}\n\nCitySelect.defaultProps = {\n  noResultsText: \"No results for this city\",\n  placeholder: \"Start typing a city name...\",\n  classes: \"\",\n  name: \"select-city\",\n  handleChange: (selected) => console.log(\"Implement a function to save selection\", selected),\n  isClearable: true,\n  isMulti: false,\n  value: null,\n}\n\nexport default CitySelect;\n"],"mappings":"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"}