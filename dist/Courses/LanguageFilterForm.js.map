{"version":3,"file":"LanguageFilterForm.js","names":["React","Component","t","ApiHelper","Select","LanguageFilterForm","props","resourceType","api","params","callback","response","options","mapArrayToSelectOptions","languages","setState","fetchResource","updateQueryParams","lang","filter","l","array","res","map","item","value","code","label","name_local","sort","e1","e2","localeCompare","state","fetchLanguages","console","log","option","indexOf","langName","langs","o","length","handleSelect","removeLanguage"],"sources":["../../src/Courses/LanguageFilterForm.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { t } from 'ttag';\nimport ApiHelper from '../utils/apiHelper'\nimport Select from '../InputFields/Select';\n\nexport default class LanguageFilterForm extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { options: [] };\n  }\n\n  componentDidMount() {\n    this.fetchLanguages();\n  }\n\n  fetchLanguages = () => {\n    const resourceType = `coursesLanguages`;\n    const api = new ApiHelper(resourceType);\n    const params = {};\n    const callback = (response) => {\n      const options = this.mapArrayToSelectOptions(response.languages);\n      this.setState({ options })\n    }\n\n    api.fetchResource({ params, callback })\n  }\n\n  handleSelect = ({languages}) => {\n    if (languages) {\n      this.props.updateQueryParams({languages: [...this.props.languages, languages]});\n    }\n  }\n\n  removeLanguage = lang => {\n    this.props.updateQueryParams({languages: this.props.languages.filter(l => l != lang)});\n  }\n\n  mapArrayToSelectOptions = (array) => {\n    let res =  array.map((item) => ({ value: item.code, label: item.name_local }));\n    res.sort( (e1, e2) => e1.label.localeCompare(e2.label) );\n    return res;\n  }\n\n  render() {\n    console.log('this.props.languages', this.props.languages)\n    let options = this.state.options.filter( option => this.props.languages.indexOf(option.value) == -1 );\n\n    const langName = lang => {\n      let langs = this.state.options.filter(o => o.value === lang);\n      console.log(langs);\n      if (langs.length){\n        return langs[0].label;\n      }\n      return lang;\n    };\n\n    return(\n      <form className=\"filter\">\n        <label htmlFor=\"languages-input\" className=\"form-label\">Languages</label>\n        <Select\n          name={'languages'}\n          inputId=\"languages-input\"\n          classes='no-flex'\n          options={options}\n          isMulti={false}\n          value={null}\n          handleChange={this.handleSelect}\n          placeholder={t`Select language(s)`}\n        />\n        <div className=\"badges selected pt-2\">\n          { \n            this.props.languages.map(lang =>\n              <span key={`${lang}-badge`} className=\"badge topic-selected topic\"><span className=\"material-icons dismiss\" role=\"button\" onClick={()=> this.removeLanguage(lang)}>close</span>{langName(lang)}</span>\n            )\n          }\n        </div>\n      </form>\n    )\n  }\n}\n"],"mappings":"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"}