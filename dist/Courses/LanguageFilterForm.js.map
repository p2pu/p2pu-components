{"version":3,"file":"LanguageFilterForm.js","names":["React","Component","t","ApiHelper","Select","LanguageFilterForm","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","resourceType","api","params","callback","response","options","mapArrayToSelectOptions","languages","setState","fetchResource","_ref","updateQueryParams","concat","_toConsumableArray","lang","filter","l","array","res","map","item","value","code","label","name_local","sort","e1","e2","localeCompare","state","_createClass","key","componentDidMount","fetchLanguages","render","_this2","console","log","option","indexOf","langName","langs","o","length","createElement","className","htmlFor","name","inputId","classes","isMulti","handleChange","handleSelect","placeholder","_templateObject","_taggedTemplateLiteral","role","onClick","removeLanguage","default"],"sources":["../../src/Courses/LanguageFilterForm.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { t } from 'ttag';\nimport ApiHelper from '../utils/apiHelper'\nimport Select from '../InputFields/Select';\n\nexport default class LanguageFilterForm extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { options: [] };\n  }\n\n  componentDidMount() {\n    this.fetchLanguages();\n  }\n\n  fetchLanguages = () => {\n    const resourceType = `coursesLanguages`;\n    const api = new ApiHelper(resourceType);\n    const params = {};\n    const callback = (response) => {\n      const options = this.mapArrayToSelectOptions(response.languages);\n      this.setState({ options })\n    }\n\n    api.fetchResource({ params, callback })\n  }\n\n  handleSelect = ({languages}) => {\n    if (languages) {\n      this.props.updateQueryParams({languages: [...this.props.languages, languages]});\n    }\n  }\n\n  removeLanguage = lang => {\n    this.props.updateQueryParams({languages: this.props.languages.filter(l => l != lang)});\n  }\n\n  mapArrayToSelectOptions = (array) => {\n    let res =  array.map((item) => ({ value: item.code, label: item.name_local }));\n    res.sort( (e1, e2) => e1.label.localeCompare(e2.label) );\n    return res;\n  }\n\n  render() {\n    console.log('this.props.languages', this.props.languages)\n    let options = this.state.options.filter( option => this.props.languages.indexOf(option.value) == -1 );\n\n    const langName = lang => {\n      let langs = this.state.options.filter(o => o.value === lang);\n      console.log(langs);\n      if (langs.length){\n        return langs[0].label;\n      }\n      return lang;\n    };\n\n    return(\n      <form className=\"filter\">\n        <label htmlFor=\"languages-input\" className=\"form-label\">Languages</label>\n        <Select\n          name={'languages'}\n          inputId=\"languages-input\"\n          classes='no-flex'\n          options={options}\n          isMulti={false}\n          value={null}\n          handleChange={this.handleSelect}\n          placeholder={t`Select language(s)`}\n        />\n        <div className=\"badges selected pt-2\">\n          { \n            this.props.languages.map(lang =>\n              <span key={`${lang}-badge`} className=\"badge topic-selected topic\"><span className=\"material-icons dismiss\" role=\"button\" onClick={()=> this.removeLanguage(lang)}>close</span>{langName(lang)}</span>\n            )\n          }\n        </div>\n      </form>\n    )\n  }\n}\n"],"mappings":"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"}